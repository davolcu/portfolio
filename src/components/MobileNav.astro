---
// Mobile Navigation Component
---

<div class='mobile-nav md:hidden'>
    <button id='mobile-menu-button' class='mobile-menu-button' aria-label='Toggle menu'>
        <span class='hamburger-line'></span>
        <span class='hamburger-line'></span>
        <span class='hamburger-line'></span>
    </button>

    <div id='mobile-menu' class='mobile-menu'>
        <div class='mobile-menu-content'>
            <a href='/' class='mobile-menu-link'>Home</a>
            <a href='/about' class='mobile-menu-link'>About</a>
            <a href='/skills' class='mobile-menu-link'>Skills</a>
            <a href='/projects' class='mobile-menu-link'>Projects</a>
            <a href='/#contact' class='mobile-menu-link'>Contact</a>
        </div>
    </div>
</div>

<script>
    function initMobileNav() {
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton && mobileMenu) {
            // Remove existing listeners to prevent duplicates
            mobileMenuButton.replaceWith(mobileMenuButton.cloneNode(true));
            const newButton = document.getElementById('mobile-menu-button');
            
            if (newButton) {
                newButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('active');
                    newButton.classList.toggle('active');
                });

                // Close menu when clicking on a link
                const mobileMenuLinks = mobileMenu.querySelectorAll('.mobile-menu-link');
                mobileMenuLinks.forEach((link) => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.remove('active');
                        newButton.classList.remove('active');
                    });
                });
            }
        }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', initMobileNav);
    
    // Re-initialize after navigation (Astro specific)
    document.addEventListener('astro:page-load', initMobileNav);
</script>

<style>
    .mobile-nav {
        position: relative;
    }

    .mobile-menu-button {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        width: 2rem;
        height: 2rem;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 0;
        z-index: 10;
        position: relative;
    }

    .hamburger-line {
        width: 2rem;
        height: 0.25rem;
        background: white;
        border-radius: 10px;
        transition: all 0.3s linear;
        position: relative;
        transform-origin: 1px;
    }

    .mobile-menu-button.active .hamburger-line:first-child {
        transform: rotate(45deg);
    }

    .mobile-menu-button.active .hamburger-line:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-button.active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg);
    }

    .mobile-menu {
        position: fixed;
        top: 0;
        right: -100%;
        width: 100%;
        height: 100vh;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        transition: right 0.3s ease-in-out;
        z-index: 5;
    }

    .mobile-menu.active {
        right: 0;
    }

    .mobile-menu-content {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
        gap: 2rem;
    }

    .mobile-menu-link {
        color: white;
        text-decoration: none;
        font-size: 1.5rem;
        font-weight: 500;
        transition: color 0.3s ease;
        position: relative;
    }

    .mobile-menu-link:hover {
        color: #a855f7;
    }

    .mobile-menu-link::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -5px;
        left: 0;
        background: linear-gradient(135deg, #667eea, #764ba2);
        transition: width 0.3s ease;
    }

    .mobile-menu-link:hover::after {
        width: 100%;
    }
</style>
